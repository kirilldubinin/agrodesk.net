<div class="ration-edit" layout="column">
    <!-- HEADER -->
    <div class="ration-sub-title" layout="row">
        <h2 flex="25">ПАРАМЕТРЫ</h2>
        <h2 class="text-center" flex="">СОСТАВ</h2>
    </div>
    <!-- CONTENT -->
    <div class="ration-view-content" flex layout="row">
        <div class="ration-info" flex="25" layout="column">
            <md-input-container class="ration-property" 
                flex="" 
                ng-repeat="(key, data) in rationEdit.rationGeneral.controls"
                ng-class="{booleanProperty : data.isBoolean, required: data.isRequired}" >
                <!-- LABEL -->
                <label class="self-explanation-link" ng-if="!data.isBoolean">
                    {{data.label + (data.dimension ? (', ' + data.dimension) : '')}}
                </label>
                <!-- SELECT -->
                <md-select ng-if="data.isEnum && data.key === 'rationType'" ng-model="rationEdit.rationGeneral.initialItem[data.key]">
                    <md-option ng-repeat="type in rationEdit.rationTypes" ng-value="type.value">
                        {{type.name}}
                    </md-option>
                </md-select>
                <!-- INPUT NUMBER -->
                <input ng-disabled="data.isDisabled" ng-if="data.isNumber" ng-model="rationEdit.rationGeneral.initialItem[data.key]" type="number"/>
                <!-- INPUT DATE -->
                <md-datepicker class="date-picker" ng-if="data.isDate" ng-model="rationEdit.rationGeneral.initialItem[data.key]">
                </md-datepicker>
                <!-- INPUT OTHER -->
                <input ng-disabled="data.isDisabled" ng-if="!data.isBoolean && !data.isNumber && !data.isEnum && !data.isDate" 
                    ng-model="rationEdit.rationGeneral.initialItem[data.key]"/>
            </md-input-container>
            
        </div>  
        <div class="composition" flex layout="column">
            <div class="composition-title" layout="row">
                <div class="component-index" flex="2">
                    #
                </div>
                <div class="component-name" flex="">
                    Компонент
                    <ng-md-icon icon="note_add" class="add-component" ng-click="rationEdit.addComponent()">
                    </ng-md-icon>
                </div>
                <div class="" flex="10">
                    Цена, руб./кг.
                </div>
                <div class="" flex="10">
                    СВ в 1 кг, кг.
                </div>
                <div class="" flex="15">
                    На голову в сутки, кг.
                </div>
                <div class="" flex="15">
                    На группу в месяц, кг.
                </div>
            </div>  
            <div class="scroll-wrapper" flex>
                <div class="composition-item" layout="row" 
                    ng-repeat="component in rationEdit.rationComposition.initialItem track by $index">
                    <div class="component-index" flex="2">
                        <span>{{component.number}}</span>
                        <ng-md-icon icon="delete_forever" ng-click="rationEdit.removeComponent(component)" class="remove-item"></ng-md-icon>
                    </div>
                    <div class="component-name" flex="">
                        <input ng-model="component.name"/>
                        <md-select ng-model="component.componentType" class="component-type">
                            <md-option ng-repeat="type in rationEdit.feedTypes" ng-value="type.value">
                                {{type.name}}
                            </md-option>
                        </md-select>
                    </div>
                    <div class="" flex="10">
                        <input type="number" ng-model="component.price" ng-change="rationEdit.update()"/>
                    </div>
                    <div class="" flex="10">
                        <input type="number" ng-model="component.dryMaterial"/>
                    </div>
                    <div class="" flex="15">
                        <input type="number" ng-model="component.value" ng-change="rationEdit.update()"/>
                    </div>
                    <div class="" flex="15">
                        {{ rationEdit.perGroupInMonth(component.value) }}
                    </div>
                </div>
            </div>  
        </div>
    </div>
    <!-- ACTIONS -->
    <div class="ration-edit-actions" layout="row" layout-align="center left" layout-sm="column" layout-wrap="">
        <md-button class="md-raised" ng-click="rationEdit.cancel()">
            Отмена
        </md-button>
        <md-button class="md-raised md-primary" ng-click="rationEdit.save()">
            Сохранить
        </md-button>
    </div>
</div>